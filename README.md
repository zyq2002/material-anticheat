# 物资验收反作弊工具

这是一个基于Flutter开发的桌面应用程序，专门用于爬取物资验收数据和相关图片，支持Windows和macOS平台。

## 功能特性

### 🔒 安全认证
- 支持 Authorization Token 认证
- 完整的请求头伪装，模拟真实浏览器行为
- 安全的HTTP请求处理

### 📅 灵活的日期管理
- 支持按天选择目标爬取日期
- 快速选择今天、昨天
- 日历选择器支持任意日期

### ⚡ 智能爬虫控制
- 可配置爬虫间隔时间（5分钟-6小时）
- 预设常用间隔时间（5分钟、10分钟、30分钟、1小时、2小时）
- 支持启动/停止控制

### 💾 智能文件管理
- 自动按日期和数据ID组织文件结构
- 文件保存格式：`根目录/pic/日期/dataId/图片文件`
- 支持自定义保存路径
- 自动创建目录结构

### 📊 实时监控界面
- 实时显示爬取进度
- 详细的统计信息（总任务数、已完成、失败数）
- 彩色日志输出，支持不同级别日志显示
- 可清空日志功能

### 🖼️ 图片处理
- 自动下载送货单照片
- 批量下载验收照片
- 智能文件命名（区分送货单和验收照片）
- 支持多种图片格式

## 系统要求

- **Windows**: Windows 10 或更高版本
- **macOS**: macOS 10.14 或更高版本
- **网络**: 稳定的互联网连接
- **存储**: 至少1GB可用空间（用于图片存储）

## 安装和运行

### 方式一：直接运行（推荐）
1. 下载对应平台的可执行文件
2. 双击运行即可

### 方式二：从源码构建
1. 安装Flutter SDK (3.0.0+)
2. 克隆项目代码
3. 安装依赖：
   ```bash
   flutter pub get
   ```
4. 生成代码：
   ```bash
   flutter pub run build_runner build --delete-conflicting-outputs
   ```
5. 运行应用：
   ```bash
   # Windows
   flutter run -d windows
   
   # macOS  
   flutter run -d macos
   ```

## 使用指南

### 1. 配置认证信息
- 在"Authorization Token"输入框中输入有效的Bearer token
- Token格式：`eyJhbGciOiJIUzUxMiJ9...`（不需要手动添加"Bearer "前缀）

### 2. 选择目标日期
- 使用日期选择器选择要爬取的日期
- 可以快速选择"今天"或"昨天"
- 支持历史日期查询

### 3. 设置爬虫频率
- 调整滑块选择间隔时间
- 建议设置：
  - **测试阶段**: 5-10分钟
  - **正式监控**: 30分钟以上
- 可使用预设按钮快速设置

### 4. 配置保存路径（可选）
- 默认保存到文档目录下的MaterialAnticheat文件夹
- 可点击"选择文件夹"自定义保存位置
- 支持"重置"回默认路径

### 5. 开始爬取
- 点击"开始爬取"按钮启动爬虫
- 在右侧实时查看进度和日志
- 可随时点击"停止爬取"终止任务

## 文件组织结构

```
选择的保存路径/
└── pic/
    └── 2025-05-26/           # 日期文件夹
        ├── 273512/           # 数据ID文件夹
        │   ├── delivery_xxx.jpg    # 送货单照片
        │   ├── check_1_xxx.jpg     # 验收照片1
        │   ├── check_2_xxx.jpg     # 验收照片2
        │   └── ...
        ├── 276040/
        │   └── ...
        └── ...
```

## 注意事项

### ⚠️ 重要提醒
1. **Token安全**: 请妥善保管您的Authorization Token，不要分享给他人
2. **合理频率**: 建议设置合理的爬取间隔，避免对服务器造成过大压力
3. **网络稳定**: 确保网络连接稳定，避免下载中断
4. **存储空间**: 定期清理不需要的图片文件，避免占用过多存储空间

### 📋 使用建议
- **首次使用**: 建议先设置5-10分钟间隔进行测试
- **正式使用**: 确认功能正常后，设置30分钟或更长间隔
- **监控日志**: 定期查看日志信息，及时发现和解决问题
- **备份数据**: 重要数据建议定期备份到其他位置

### 🔧 故障排除
- **Token失效**: 如果出现认证错误，请检查Token是否过期并重新获取
- **网络错误**: 检查网络连接和防火墙设置
- **权限问题**: 确保应用有写入选择目录的权限
- **文件冲突**: 如果下载失败，检查目标文件是否被其他程序占用

## 技术支持

如遇到问题，请检查以下内容：
1. 网络连接是否正常
2. Authorization Token是否有效
3. 保存路径是否有写入权限
4. 查看日志输出中的错误信息

## 版本信息

- **当前版本**: 1.0.0
- **更新日期**: 2025年1月
- **技术栈**: Flutter + Dart + Riverpod
- **支持平台**: Windows, macOS

---

**注意**: 本工具仅供学习和技术研究使用，请遵守相关法律法规和网站使用条款。 